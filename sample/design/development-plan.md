# 開発計画書

## 1. 開発ロードマップ

### Phase 1: MVP (Minimum Viable Product) 開発
- **期間**: 開発開始から約2ヶ月
- **目標**: コア機能（投稿、AI解析、閲覧、SOS）の実装とリリース。初期ユーザーによる仮説検証（技術検証含む）。
- **ターゲット**: 限定公開、または小規模なパブリックリリース。

### Phase 2: コミュニティ機能強化 (Ver 1.0)
- **期間**: MVPリリース後 + 1.5ヶ月
- **目標**: ユーザー定着率の向上。
- **追加機能**:
    - 性格診断の詳細化
    - 週次バッジ/ランキングシステム
    - ユーザープロフィール詳細（貢献度グラフなど）
    - エリア通知機能（Push通知）

### Phase 3: マネタイズ & 運用安定化 (Ver 1.x)
- **期間**: Ver 1.0リリース後
- **目標**: 収益化の開始と運用の省力化。
- **追加機能**:
    - 卒業アーカイブ（有料コンテンツ）
    - 管理画面の高機能化
    - 広告/アフィリエイト枠の実装

## 2. タスク分解 (WBS: Work Breakdown Structure) - MVP

### 2.1 環境構築 & 基盤 (Week 1)
- [ ] Next.js プロジェクトセットアップ (TypeScript, ESLint, Prettier)
- [ ] Vercel デプロイパイプライン構築
- [ ] Supabase プロジェクト作成 & DBスキーマ適用
- [ ] Clerk 認証導入 & 動作確認

### 2.2 投稿 & AI機能 (Week 2-3)
- [ ] 投稿作成画面 (UI) 実装
- [ ] OpenAI API 連携機能 (Server Actions) 実装
- [ ] プロンプトエンジニアリング（要約・タイトル生成の精度調整）
- [ ] 投稿データのDB保存処理
- [ ] SOSフラグ処理 & UI切り替え実装

### 2.3 タイムライン & 詳細閲覧 (Week 4-5)
- [ ] タイムライン画面 (UI) 実装
- [ ] 投稿一覧取得ロジック (Server Component) 実装
- [ ] 無限スクロール / ページネーション
- [ ] 投稿詳細画面 (UI) 実装
- [ ] コメント機能実装 (Realtime反映含む)

### 2.4 プロフィール & その他 (Week 6)
- [ ] マイページ画面 (UI) 実装
- [ ] プロフィール編集機能
- [ ] 簡易的な性格診断（登録フロー）
- [ ] 利用規約・プライバシーポリシー・問い合わせページ作成

### 2.5 テスト & 修正 (Week 7-8)
- [ ] 単体テスト / 結合テスト
- [ ] UI/UX ブラッシュアップ
- [ ] モバイル端末での実機確認
- [ ] バグ修正
- [ ] リリース準備

## 3. リスク管理

プロジェクト遂行にあたり想定されるリスクと、その対策を定義します。

| リスクID | リスク内容 | 発生確率 | 影響度 | 対策 (Mitigation) |
| :--- | :--- | :--- | :--- | :--- |
| **R1** | **AI APIコストの超過** | 中 | 高 | `gpt-4o-mini` をメインに使用。プロンプトで出力トークン数を厳格に制限。キャッシュ戦略の導入。 |
| **R2** | **不適切コンテンツの拡散** | 低 | 高 | OpenAI Moderation APIによる事前チェック。ユーザー通報機能の実装。すりガラスUIによるゾーニング。 |
| **R3** | **SOS機能の悪用・オオカミ少年化** | 中 | 中 | SOS利用履歴の可視化。悪質な虚偽報告に対するスコア減点ペナルティ。通報による取り下げ機能。 |
| **R4** | **開発スケジュールの遅延** | 中 | 中 | 機能の優先順位（MoSCoW）を明確にし、必須機能（Must）以外は大胆にカットまたはPhase 2へ回す。 |

## 4. 開発プロセス
- **手法**: アジャイル的な反復開発。
- **タスク管理**: GitHub Projects / Issues を使用。
- **コード管理**: GitHub Flow（Feature Branch -> Pull Request -> Main）。
- **ドキュメント**: 仕様変更時は本ドキュメントおよび要件定義書を更新する。

